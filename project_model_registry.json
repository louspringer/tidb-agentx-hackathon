{
  "description": "Model-driven tool orchestration registry for OpenFlow Playground. This is the single source of truth for domain detection, tool selection, and requirements traceability.",
  "version": "1.0",
  "last_updated": "2024-07-25",
  "author": "LLM + Lou (OpenFlow-Playground)",
  "domains": {
    "cloudformation": {
      "patterns": ["*.template.yaml", "models/*.yaml", "*cloudformation*.yaml"],
      "content_indicators": ["!Sub", "!Ref", "!GetAtt", "AWS::", "Type: 'AWS::"],
      "linter": "cfn-lint",
      "validator": "aws-cloudformation",
      "exclusions": [],
      "requirements": [
        "Don't lint CloudFormation with generic YAML tools",
        "Use cfn-lint for CloudFormation validation"
      ]
    },
    "python": {
      "patterns": ["*.py"],
      "content_indicators": ["import ", "def ", "class ", "#!/usr/bin/env python"],
      "linter": "flake8",
      "formatter": "black",
      "exclusions": ["__pycache__/*", "*.pyc"],
      "requirements": [
        "Use flake8 for Python linting",
        "Format Python code with black"
      ]
    },
    "yaml": {
      "patterns": ["*.yaml", "*.yml"],
      "content_indicators": ["---", "key: value"],
      "linter": "yamllint",
      "exclusions": ["models/*.yaml", "*.template.yaml"],
      "requirements": [
        "Lint generic YAML files with yamllint",
        "Exclude CloudFormation files from generic YAML linting"
      ]
    },
    "yaml_infrastructure": {
      "patterns": ["*cloudformation*.yaml", "*infrastructure*.yaml", "*aws*.yaml", "models/*.yaml"],
      "content_indicators": ["!Sub", "!Ref", "!GetAtt", "AWS::", "Type: 'AWS::"],
      "linter": "cfn-lint",
      "validator": "aws-cloudformation",
      "exclusions": [],
      "requirements": [
        "Use cfn-lint for CloudFormation YAML files",
        "Apply AWS-specific validation for infrastructure YAML"
      ]
    },
    "yaml_config": {
      "patterns": ["config*.yaml", "settings*.yaml", "*.config.yaml"],
      "content_indicators": ["config:", "settings:", "environment:", "features:"],
      "linter": "yamllint",
      "validator": "jsonschema",
      "exclusions": [],
      "requirements": [
        "Use yamllint for configuration YAML files",
        "Apply schema validation for config files"
      ]
    },
    "yaml_cicd": {
      "patterns": [".github/*.yaml", ".gitlab-ci.yml", "*.workflow.yaml", "azure-pipelines*.yml"],
      "content_indicators": ["on:", "jobs:", "steps:", "pipeline:", "stages:"],
      "linter": "actionlint",
      "validator": "gitlab-ci-lint",
      "exclusions": [],
      "requirements": [
        "Use domain-specific CI/CD validators",
        "Apply workflow syntax validation"
      ]
    },
    "yaml_kubernetes": {
      "patterns": ["k8s/*.yaml", "kubernetes/*.yaml", "*.k8s.yaml"],
      "content_indicators": ["apiVersion:", "kind:", "metadata:", "spec:"],
      "linter": "kubectl",
      "validator": "kubeval",
      "exclusions": [],
      "requirements": [
        "Use kubectl validate for Kubernetes YAML",
        "Apply Kubernetes API validation"
      ]
    },
    "security": {
      "patterns": ["**/*"],
      "content_indicators": ["password", "secret", "key", "token", "credential"],
      "linter": "bandit",
      "validator": "detect-secrets",
      "exclusions": [],
      "requirements": [
        "Scan for hardcoded credentials and secrets",
        "Enforce security policy via detect-secrets and bandit"
      ]
    },
    "bash": {
      "patterns": ["*.sh", "*.bash"],
      "content_indicators": ["#!/bin/bash", "#!/bin/sh", "export ", "source "],
      "linter": "shellcheck",
      "exclusions": [],
      "requirements": [
        "Lint shell scripts with shellcheck"
      ]
    }
  },
  "tool_selection_logic": {
    "pattern_weight": 0.4,
    "content_indicator_weight": 0.3,
    "exclusion_weight": 0.3,
    "confidence_threshold": 0.5
  },
  "requirements_traceability": [
    {
      "requirement": "Don't lint CloudFormation with generic YAML tools",
      "domain": "cloudformation",
      "implementation": "content_indicators, patterns, yamllint exclusions",
      "test": "test_requirement_1_cloudformation_detection"
    },
    {
      "requirement": "Use domain-specific tools",
      "domain": "*",
      "implementation": "linter, validator, formatter fields in each domain",
      "test": "test_requirement_2_tool_selection"
    },
    {
      "requirement": "Generate proper exclusions",
      "domain": "yaml",
      "implementation": "exclusions field in yaml domain",
      "test": "test_requirement_3_exclusion_generation"
    },
    {
      "requirement": "Intelligent content analysis",
      "domain": "*",
      "implementation": "content_indicators in each domain",
      "test": "test_requirement_4_content_analysis"
    },
    {
      "requirement": "Intelligent confidence scoring",
      "domain": "*",
      "implementation": "tool_selection_logic weights",
      "test": "test_requirement_5_confidence_scoring"
    },
    {
      "requirement": "Actual tool execution works",
      "domain": "*",
      "implementation": "validate_file() method",
      "test": "test_requirement_6_tool_execution"
    },
    {
      "requirement": "Extensible domain registry",
      "domain": "*",
      "implementation": "domains object in this file",
      "test": "test_requirement_7_domain_registry"
    },
    {
      "requirement": "YAML type-specific validation",
      "domain": "yaml_infrastructure",
      "implementation": "cfn-lint for CloudFormation, aws-cloudformation validator",
      "test": "test_requirement_8_yaml_infrastructure"
    },
    {
      "requirement": "Configuration YAML validation",
      "domain": "yaml_config", 
      "implementation": "yamllint + jsonschema for config files",
      "test": "test_requirement_9_yaml_config"
    },
    {
      "requirement": "CI/CD YAML validation",
      "domain": "yaml_cicd",
      "implementation": "actionlint for GitHub Actions, gitlab-ci-lint for GitLab CI",
      "test": "test_requirement_10_yaml_cicd"
    },
    {
      "requirement": "Kubernetes YAML validation",
      "domain": "yaml_kubernetes",
      "implementation": "kubectl validate, kubeval for K8s files",
      "test": "test_requirement_11_yaml_kubernetes"
    }
  ],
  "meta": {
    "project": "OpenFlow Playground",
    "model_type": "model-driven tool orchestration",
    "file": "project_model_registry.json",
    "tests": [
      "test_model_traceability.py"
    ],
    "rules": [
      ".cursor/rules/security-credentials.mdc",
      ".cursor/rules/deterministic-editing.mdc",
      ".cursor/rules/investigation-analysis.mdc",
      ".cursor/rules/llm-architect.mdc",
      ".cursor/rules/intelligent-policy.mdc",
      ".cursor/rules/prevention-architecture.mdc",
      ".cursor/rules/cloudformation-linting.mdc",
      ".cursor/rules/yaml-type-specific.mdc"
    ]
  }
} 